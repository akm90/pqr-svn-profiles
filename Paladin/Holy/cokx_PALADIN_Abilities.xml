<?xml version="1.0" encoding="utf-8" ?><PALADIN><Ability><Name>Autotarget Low HP</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) 
  and UnitIsDead(&amp;quot;target&amp;quot;) == nil
  and UnitIsFriend(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) 
  and UnitCanCooperate(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;)
  and UnitInRange(&amp;quot;target&amp;quot;) 
  and PQR_IsOutOfSight(&amp;quot;target&amp;quot;) == false
  then PQR_CustomTarget = &amp;quot;target&amp;quot;
          PQR_CustomTargetHP = 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)


else 

PQR_CustomTarget = &amp;quot;player&amp;quot;
PQR_CustomTargetTarget = &amp;quot;playertarget&amp;quot;
PQR_CustomTargetHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)
PQR_CustomTargetTargetHP = 100 * UnitHealth(&amp;quot;playertarget&amp;quot;) / UnitHealthMax(&amp;quot;playertarget&amp;quot;)
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()
lowhpmembers = 0
local lowest = 100

if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
   members = GetNumRaidMembers()
end

for i = 1, members, 1 do
  local member = group..tostring(i)
  local memberstarget = group..tostring(i)..&amp;quot;target&amp;quot;
  local memberhp = 100 * UnitHealth(member) / UnitHealthMax(member)
  if UnitInRange(member) 
  and UnitIsFriend(&amp;quot;player&amp;quot;, member)
  and UnitIsDeadOrGhost(member) == nil
  and PQR_IsOutOfSight(member) == false  then
    if UnitGroupRolesAssigned(member) == &amp;quot;TANK&amp;quot; then memberhp = memberhp - 1 end
    if UnitThreatSituation(member) == 3 then memberhp = memberhp - 3 end
    if UnitBuffID(member, 53563) ~= nil then memberhp = memberhp + 4 end
    if UnitDebuffID(member, 73975) ~= nil then memberhp = memberhp - 10 end
    if memberhp &amp;lt; 85 then lowhpmembers = lowhpmembers +1 end
    if memberhp &amp;lt; lowest then
      PQR_CustomTarget = member
      PQR_CustomTargetTarget = memberstarget
      lowest = memberhp
      PQR_CustomTargetHP = 100 * UnitHealth(PQR_CustomTarget) / UnitHealthMax(PQR_CustomTarget)
      PQR_CustomTargetTargetHP = 100 * UnitHealth(PQR_CustomTargetTarget) / UnitHealthMax(PQR_CustomTargetTarget)
    end
  end
end

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Seal of Insight</Name><Default>false</Default><SpellID>20165</SpellID><Actions></Actions><Lua>local SoI = UnitBuffID(&amp;quot;player&amp;quot;, 20165)

if SoI == nil then 
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>ConcentrationAura</Name><Default>false</Default><SpellID>19746</SpellID><Actions></Actions><Lua>local Aura = GetShapeshiftForm(&amp;quot;player&amp;quot;)

if Aura ~= 3 and IsMounted() == nil then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>CrusaderAura</Name><Default>false</Default><SpellID>32223</SpellID><Actions></Actions><Lua>local Aura = GetShapeshiftForm(&amp;quot;player&amp;quot;)

if Aura ~= 5 and IsMounted() then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Don&amp;apos;t Dismount</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsMounted() then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>AutoStopCasting</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local Spell = UnitCastingInfo(&amp;quot;player&amp;quot;)

if PQR_CustomTargetHP &amp;gt; 96 then
	if Spell == &amp;quot;Holy Light&amp;quot; or Spell == &amp;quot;Divine Light&amp;quot; or Spell == &amp;quot;Flash of Light&amp;quot; then
		SpellStopCasting()
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Judgement</Name><Default>false</Default><SpellID>20271</SpellID><Actions></Actions><Lua>if UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Polymorph&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Freezing Trap&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Scatter Shot&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Bad Manner&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Ring of Frost&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Fear&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Sap&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Blind&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Hungering Cold&amp;quot;) then 
	return false 
end 

local SoI = UnitBuffID(&amp;quot;player&amp;quot;, 20165)
local SoJ = UnitBuffID(&amp;quot;player&amp;quot;, 20164)
local SoR = UnitBuffID(&amp;quot;player&amp;quot;, 20154)
local SoT = UnitBuffID(&amp;quot;player&amp;quot;, 31801)
local JotP1 = UnitBuffID(&amp;quot;player&amp;quot;, 53655)
local JotP2 = UnitBuffID(&amp;quot;player&amp;quot;, 53656)
local JotP3 = UnitBuffID(&amp;quot;player&amp;quot;, 53657)
local inRange = IsSpellInRange(&amp;quot;Judgement&amp;quot;, &amp;quot;target&amp;quot;)
local myMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

if UnitAffectingCombat(&amp;quot;player&amp;quot;) then
	if (SoR ~= nil or SoT ~= nil or SoJ ~= nil or SoI ~= nil) and JotP1== nil and JotP2 == nil and JotP3 == nil then
		if IsSpellInRange(&amp;quot;Judgement&amp;quot;, PQR_CustomTargettarget) == 1 then
			CastSpellByID(20271,PQR_CustomTargettarget)
		end
	elseif PQR_CustomTargetHP &amp;gt; 80 then
		if UnitAffectingCombat(&amp;quot;player&amp;quot;) and UnitIsEnemy(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) and inRange == 1 then
			return true
		end
	end
end

if myMana &amp;lt; 15 then
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Word of Glory</Name><Default>false</Default><SpellID>85673</SpellID><Actions></Actions><Lua>local myHolyPower = UnitPower(&amp;quot;player&amp;quot;, 9)

if PQR_CustomTargetHP &amp;lt; 80 and myHolyPower == 3 then 
	return true
end
if PQR_CustomTargetHP &amp;lt; 20 and myHolyPower == 2 then 
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Holy Shock</Name><Default>false</Default><SpellID>20473</SpellID><Actions></Actions><Lua>local myMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)
local enemy = UnitIsEnemy(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)

if PQR_CustomTargetHP &amp;lt; 94 then 
	return true
elseif myMana &amp;gt; 20 and enemy then
	CastSpellByID(20473, &amp;quot;target&amp;quot;)
end</Lua><RecastDelay>100</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Divine Plea</Name><Default>false</Default><SpellID>54428</SpellID><Actions></Actions><Lua>local myMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

if myMana &amp;lt; 75 then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Avenging Wrath</Name><Default>false</Default><SpellID>31884</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 60 then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Turn Undead</Name><Default>false</Default><SpellID>19725</SpellID><Actions></Actions><Lua>local TU = UnitDebuffID(&amp;quot;mouseover&amp;quot;, 19725)
local HW = UnitDebuffID(&amp;quot;mouseover&amp;quot;, 2812)
local hasFocus = UnitExists(&amp;quot;mouseover&amp;quot;)
local type= UnitCreatureType(&amp;quot;mouseover&amp;quot;)
local Meta = UnitBuffID(&amp;quot;mouseover&amp;quot;, 59672)

if hasFocus ~= nil then
	if type == &amp;quot;Undead&amp;quot; or type == &amp;quot;Demon&amp;quot; or Meta ~= nil then
		if TU == nil and HW == nil and GetUnitSpeed(&amp;quot;Player&amp;quot;) &amp;lt;= 0 then
			return true
		end
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Holy Wrath</Name><Default>false</Default><SpellID>2812</SpellID><Actions></Actions><Lua>local TU = UnitDebuffID(&amp;quot;mouseover&amp;quot;, 19725)
local HW = UnitDebuffID(&amp;quot;mouseover&amp;quot;, 2812)
local hasFocus = UnitExists(&amp;quot;mouseover&amp;quot;)
local type= UnitCreatureType(&amp;quot;mouseover&amp;quot;)
local Meta = UnitBuffID(&amp;quot;mouseover&amp;quot;, 59672)

if hasFocus ~= nil then
	if type == &amp;quot;Undead&amp;quot; or type == &amp;quot;Demon&amp;quot; or type == &amp;quot;Elemental&amp;quot; or Meta ~= nil then
		if TU == nil and HW == nil then
			if CheckInteractDistance(&amp;quot;mouseover&amp;quot;, 3) == 1 then
				return true
			end
		end
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Flash of Light</Name><Default>false</Default><SpellID>19750</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 75 and PQR_IsMoving(1) == false and PQR_IsCastingSpell(19750) == false then 
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Divine Light</Name><Default>false</Default><SpellID>82326</SpellID><Actions></Actions><Lua>local AM = UnitBuffID(&amp;quot;player&amp;quot;, 31821)

if PQR_CustomTargetHP &amp;lt; 75 and PQR_IsMoving(1) == false and PQR_IsCastingSpell(82326) == false and AM ~= nil then 
	return true
end</Lua><RecastDelay>250</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Flash of Light (proc)</Name><Default>false</Default><SpellID>19750</SpellID><Actions></Actions><Lua>local Infusion = UnitBuffID(&amp;quot;player&amp;quot;, 54149)

if PQR_CustomTargetHP &amp;lt; 80 and PQR_IsMoving(.1) and Infusion ~= nil then
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Divine Light (Proc)</Name><Default>false</Default><SpellID>82326</SpellID><Actions></Actions><Lua>local Infusion = UnitBuffID(&amp;quot;player&amp;quot;, 54149)

if PQR_CustomTargetHP &amp;lt; 66 and PQR_IsMoving(1) == false and PQR_IsCastingSpell(82326) == false and Infusion ~= nil  then 
	return true
end</Lua><RecastDelay>250</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Divine Favor (AM)</Name><Default>false</Default><SpellID>31842</SpellID><Actions></Actions><Lua>local AM = UnitBuffID(&amp;quot;player&amp;quot;, 31821)

if AM ~= nil then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Holy Radiance</Name><Default>false</Default><SpellID>82327</SpellID><Actions></Actions><Lua>local myMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

if myMana &amp;gt;= 10 and lowhpmembers &amp;gt; 5 and PQR_IsMoving(1) == false then 
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Hand of Freedom</Name><Default>false</Default><SpellID>1044</SpellID><Actions></Actions><Lua>local buff = { 45524, 1715, 3408, 59638, 20164, 25809, 31589, 51585, 50040, 50041, 31126, 31124, 122, 44614, 1604, 45524, 50040, 339, 45334, 58179, 61391, 19306, 19185, 35101, 5116, 61394, 2974, 54644, 50245, 50271, 54706, 4167, 33395, 83302, 55080, 11113, 6136, 120, 116, 44614, 31589, 63529, 20170, 87194, 31125, 3409, 26679, 64695, 63685, 8056, 8034, 18118, 18223, 63311, 23694, 1715, 12323, 39965, 55536, 13099, 29703 }
local havebuff = nil

for i,v in ipairs(buff) do
 if UnitDebuffID(&amp;quot;player&amp;quot;,v) then havebuff = 1 end
end

if havebuff then return true  end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Hand of Freedom (Party)</Name><Default>false</Default><SpellID>1044</SpellID><Actions></Actions><Lua>local buff = { 45524, 1715, 3408, 59638, 20164, 25809, 31589, 51585, 50040, 50041, 31126, 31124, 122, 44614, 1604, 45524, 50040, 339, 45334, 58179, 61391, 19306, 19185, 35101, 5116, 61394, 2974, 54644, 50245, 50271, 54706, 4167, 33395, 83302, 55080, 11113, 6136, 120, 116, 44614, 31589, 63529, 20170, 87194, 31125, 3409, 26679, 64695, 63685, 8056, 8034, 18118, 18223, 63311, 23694, 1715, 12323, 39965, 55536, 13099, 29703 }
local havebuff = nil
local class = select(2, UnitClass(PQR_CustomTarget))

if GetUnitSpeed(PQR_CustomTarget) &amp;lt; GetUnitSpeed(PQR_CustomTargetTarget) then toofast = 1 end
for i,v in ipairs(buff) do
 if UnitDebuffID(PQR_CustomTarget,v) then havebuff = 1 end
end

if havebuff and toofast and select(2, UnitClass(PQR_CustomTarget)) ~= &amp;quot;HUNTER&amp;quot; and UnitPowerMax(PQR_CustomTarget) &amp;lt; 30000 then return true  end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Denounce</Name><Default>false</Default><SpellID>879</SpellID><Actions></Actions><Lua>if UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Polymorph&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Freezing Trap&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Scatter Shot&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Bad Manner&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Ring of Frost&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Fear&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Sap&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Blind&amp;quot;) or UnitDebuff(&amp;quot;target&amp;quot;, &amp;quot;Hungering Cold&amp;quot;) then 
	return false 
end 

local Denounce, _, _, _, _, _, Dexpire = UnitDebuffID(&amp;quot;target&amp;quot;, 85509)
local target = UnitExists(&amp;quot;target&amp;quot;)
local enemy = UnitIsEnemy(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)
local targetHealth = 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)

if target and enemy then
	if Denounce ~= nil then
		Dexpire = (Dexpire - GetTime())
		if PQR_CustomTargetHP &amp;gt; 90 and Dexpire &amp;lt;= 3 then
			return true
		elseif PQR_CustomTargetHP &amp;gt; 90 and targetHealth &amp;lt; 50 then
			return true
		end
	else
		if PQR_CustomTargetHP &amp;gt; 90 then
			return true
		end
	end
end</Lua><RecastDelay>100</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Divine Shield</Name><Default>false</Default><SpellID>642</SpellID><Actions></Actions><Lua>local myHealth = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

if myHealth &amp;lt; 15 then
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Divine Protection</Name><Default>false</Default><SpellID>498</SpellID><Actions></Actions><Lua>local myHealth = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

if myHealth &amp;lt; 65 and UnitBuffID(&amp;quot;player&amp;quot;,642) ~= nil then
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Cleanse</Name><Default>false</Default><SpellID>4987</SpellID><Actions></Actions><Lua>function CheckMagic(unitid)
  local i = 1
  local buff,_,_,count,bufftype,duration = UnitDebuff(unitid, i)
  while buff do
    if bufftype == &amp;quot;Magic&amp;quot; or bufftype == &amp;quot;Poison&amp;quot; or bufftype == &amp;quot;Disease&amp;quot;  then return true end
    i = i + 1;
    buff,_,_,count,bufftype,duration = UnitDebuff(unitid, i)
  end
end


PQR_CustomTarget = &amp;quot;player&amp;quot;
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()

if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end

for i = 1, members, 1 do
  local member = group..tostring(i)
  if UnitInRange(member) 
  and UnitIsCharmed(member) == nil
  and UnitIsDeadOrGhost(member) == nil 
  and PQR_IsOutOfSight(member) == false then
    if CheckMagic(member) then PQR_CustomTarget = member end
  end
end

if CheckMagic(PQR_CustomTarget) and UnitDebuffID(PQR_CustomTarget,30108) == nil then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>BoM</Name><Default>false</Default><SpellID>19740</SpellID><Actions></Actions><Lua>local BoK = UnitBuffID(&amp;quot;player&amp;quot;, 20217)
local BoM = UnitBuffID(&amp;quot;player&amp;quot;, 19740)

if not UnitAffectingCombat(&amp;quot;player&amp;quot;) and BoK == nil and BoM == nil then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>SelfBeacon</Name><Default>false</Default><SpellID>53563</SpellID><Actions></Actions><Lua>local Beacon = UnitBuffID(&amp;quot;player&amp;quot;, 53563)

if Beacon == nil then
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>GoAK</Name><Default>false</Default><SpellID>86150</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 30 then
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Cleanse CC</Name><Default>false</Default><SpellID>4987</SpellID><Actions></Actions><Lua>function CheckMagic(unitid)
  local i = 1
  local buff,_,_,count,bufftype,duration = UnitDebuff(unitid, i)
  while buff do
    if bufftype == &amp;quot;Magic&amp;quot; or bufftype == &amp;quot;Poison&amp;quot; or bufftype == &amp;quot;Disease&amp;quot; then return true end
    i = i + 1;
    buff,_,_,count,bufftype,duration = UnitDebuff(unitid, i)
  end
end


PQR_CustomTarget = &amp;quot;player&amp;quot;
PQR_CustomTargetTarget = &amp;quot;playertarget&amp;quot;
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()

if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end



for i = 1, members, 1 do
  local member = group..tostring(i)
  local memberstarget = group..tostring(i)..&amp;quot;target&amp;quot;
  if UnitInRange(member) 
  and UnitIsDeadOrGhost(member) == nil 
  and PQR_IsOutOfSight(member) == false
then
    if CheckMagic(member) then PQR_CustomTarget = member end
    if CheckMagic(member) then PQR_CustomTargetTarget = memberstarget end
end
end


 if (UnitDebuffID(PQR_CustomTarget,49203) ~= nil or UnitDebuffID(PQR_CustomTarget,19386) ~= nil  or  UnitDebuffID(PQR_CustomTarget,3355) ~= nil  or  UnitDebuffID(PQR_CustomTarget,44572) ~= nil  or  UnitDebuffID(PQR_CustomTarget,118) ~= nil  or  UnitDebuffID(PQR_CustomTarget,82691) ~= nil  or  UnitDebuffID(PQR_CustomTarget,31661) ~= nil  or  UnitDebuffID(PQR_CustomTarget,853) ~= nil  or  UnitDebuffID(PQR_CustomTarget,20066) ~= nil  or  UnitDebuffID(PQR_CustomTarget,10326) ~= nil  or  UnitDebuffID(PQR_CustomTarget,605) ~= nil  or  UnitDebuffID(PQR_CustomTarget,64044) ~= nil  or  UnitDebuffID(PQR_CustomTarget,8122) ~= nil  or  UnitDebuffID(PQR_CustomTarget,9484) ~= nil  or  UnitDebuffID(PQR_CustomTarget,15487) ~= nil  or  UnitDebuffID(PQR_CustomTarget,6789) ~= nil  or  UnitDebuffID(PQR_CustomTarget,5782) ~= nil  or  UnitDebuffID(PQR_CustomTarget,5484) ~= nil  or  UnitDebuffID(PQR_CustomTarget,6358) ~= nil  or  UnitDebuffID(PQR_CustomTarget,30283) ~= nil  or  UnitDebuffID(PQR_CustomTarget,24259) ~= nil  or  UnitDebuffID(PQR_CustomTarget,31117) ~= nil  or  UnitDebuffID(PQR_CustomTarget,18498) ~= nil  or  UnitDebuffID(PQR_CustomTarget,33395)  ~= nil or  UnitDebuffID(PQR_CustomTarget,122)  ~= nil )
and CheckMagic(PQR_CustomTarget) and UnitDebuffID(PQR_CustomTarget,30108) == nil then return true 
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Blessings</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local BoM = UnitBuff(&amp;quot;player&amp;quot;, &amp;quot;Blessing of Might&amp;quot;)

if BoM == nil then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Denounce (LeftAlt)</Name><Default>false</Default><SpellID>879</SpellID><Actions></Actions><Lua>local target = UnitExists(&amp;quot;target&amp;quot;)

if IsLeftAltKeyDown() and GetCurrentKeyBoardFocus() == nil then
	if target then
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>BoL</Name><Default>false</Default><SpellID>53563</SpellID><Actions></Actions><Lua>local bol = UnitBuffID(PQR_CustomTarget, 53563)

if PQR_CustomTargetHP &amp;lt; 75 and PQR_CustomTargetHP &amp;gt; 30 and bol == nil and modkeystate == nil then 
	return true
end</Lua><RecastDelay>30000</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>BoK</Name><Default>false</Default><SpellID>20217</SpellID><Actions></Actions><Lua>local BoK = UnitBuffID(&amp;quot;player&amp;quot;, 20217)
local BoM = UnitBuffID(&amp;quot;player&amp;quot;, 19740)
local MotW = UnitBuffID(&amp;quot;player&amp;quot;, 1126)

if not UnitAffectingCombat(&amp;quot;player&amp;quot;) and BoK == nil and BoM == nil and MotW == nil then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Crusader Strike</Name><Default>false</Default><SpellID>35395</SpellID><Actions></Actions><Lua>local enemy = UnitIsEnemy(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)
local myMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

if IsSpellInRange(&amp;quot;Crusader Strike&amp;quot;, &amp;quot;target&amp;quot;) == 1 and PQR_CustomTargetHP &amp;gt; 90 and myMana &amp;gt; 30 then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Holy Light</Name><Default>false</Default><SpellID>635</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 95 and PQR_CustomTargetHP &amp;gt; 85 and PQR_IsMoving(1) == false and PQR_IsCastingSpell(635) == false then 
	return true
end</Lua><RecastDelay>100</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Definitations</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local runSpeedPlayer = GetUnitSpeed(&amp;quot;Player&amp;quot;)
local runSpeedTarget = GetUnitSpeed(PQR_CustomTarget)
local runSpeedTargetTarget = GetUnitSpeed(PQR_CustomTargetTarget)</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Gift of the Naaru</Name><Default>false</Default><SpellID>59542</SpellID><Actions></Actions><Lua>if IsSpellKnown(59542) and PQR_CustomTargetHP &amp;lt; 20 then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>InterruptCast</Name><Default>false</Default><SpellID>96231</SpellID><Actions>/stopcasting</Actions><Lua>local buff = { 118,116,61305,28271,28272,61780,61721,2637,33786,5185,8936,50464,19750,82326,2061,9484,605,8129,331,8004,51505,403,77472,51514,5782,1120,48181,30108 }

local castingSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;target&amp;quot;)
for i,v in ipairs(buff) do
if IsSpellInRange(&amp;quot;Rebuke&amp;quot;, &amp;quot;target&amp;quot;)   and PQR_IsOutOfSight(&amp;quot;target&amp;quot;) == false and castingSpell == GetSpellInfo(v) and endTime/1000 - GetTime() &amp;lt; 0.5  then return true end end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Hand of Freedom (Party) ranged</Name><Default>false</Default><SpellID>1044</SpellID><Actions></Actions><Lua>local buff = { 339,45334,19306,19185,50245,54706,4167,33395,122,83302,55080,87194,64695,63685,3409,23694,63311 }
local havebuff = nil
local class = select(2, UnitClass(PQR_CustomTarget))

for i,v in ipairs(buff) do
if UnitDebuffID(PQR_CustomTarget,v) then havebuff = 1 end
end
if GetUnitSpeed(PQR_CustomTarget) &amp;lt; GetUnitSpeed(PQR_CustomTargetTarget) and GetUnitSpeed(PQR_CustomTargetTarget) &amp;lt; 14 then toofast = 1 end



if havebuff and toofast and class == &amp;quot;HUNTER&amp;quot; then return true end

if havebuff and toofast and UnitPowerMax(PQR_CustomTarget) &amp;gt; 30000 then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Hand of Freedom (Party) melee</Name><Default>false</Default><SpellID>1044</SpellID><Actions></Actions><Lua>function CheckSlow(unitid)
local buff = { 45524, 1715, 3408, 59638, 20164, 25809, 31589, 51585, 50040, 50041, 31126, 31124, 122, 44614, 1604, 45524, 50040, 339, 45334, 58179, 61391, 19306, 19185, 35101, 5116, 61394, 2974, 54644, 50245, 50271, 54706, 4167, 33395, 83302, 55080, 11113, 6136, 120, 116, 44614, 31589, 63529, 20170, 87194, 31125, 3409, 26679, 64695, 63685, 8056, 8034, 18118, 18223, 63311, 23694, 1715, 12323, 39965, 55536, 13099, 29703 }

for i,v in ipairs(buff) do
 if UnitDebuffID(unitid,v) then return true end
end

PQR_CustomTarget = &amp;quot;player&amp;quot;
PQR_CustomTargetTarget = &amp;quot;playertarget&amp;quot;
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()

if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end

for i = 1, members, 1 do
  local member = group..tostring(i)
  if UnitInRange(member) 
  and UnitIsDeadOrGhost(member) == nil 
  and PQR_IsOutOfSight(member) == false
then
 if CheckSlow(member) then PQR_CustomTarget=member end
end
end
end

local class = select(2, UnitClass(PQR_CustomTarget))
if GetUnitSpeed(PQR_CustomTarget) &amp;lt; GetUnitSpeed(PQR_CustomTargetTarget) and GetUnitSpeed(PQR_CustomTargetTarget) &amp;lt; 14 then toofast = 1 end

if toofast and class ~= &amp;quot;HUNTER&amp;quot; and UnitPowerMax(PQR_CustomTarget) &amp;lt; 30000 then return true  end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>InterruptCastFocus</Name><Default>false</Default><SpellID>96231</SpellID><Actions>/stopcasting</Actions><Lua>local buff = { 118,116,61305,28271,28272,61780,61721,2637,33786,5185,8936,50464,19750,82326,2061,9484,605,8129,331,8004,51505,403,77472,51514,5782,1120,48181,30108 }

local castingSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;focus&amp;quot;)
for i,v in ipairs(buff) do
if IsSpellInRange(&amp;quot;Rebuke&amp;quot;, &amp;quot;focus&amp;quot;)  and PQR_IsOutOfSight(&amp;quot;focus&amp;quot;) == false and castingSpell == GetSpellInfo(v) and endTime/1000 - GetTime() &amp;lt; 0.5  then return true end end</Lua><RecastDelay>0</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>InterruptCastArena</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local buff = { 118,116,61305,28271,28272,61780,61721,2637,33786,5185,8936,50464,19750,82326,2061,9484,605,8129,331,8004,51505,403,77472,51514,5782,1120,48181,30108 }

local castingSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;arena1&amp;quot;)
for i,v in ipairs(buff) do
if IsSpellInRange(&amp;quot;Rebuke&amp;quot;, &amp;quot;arena1&amp;quot;) and PQR_IsOutOfSight(&amp;quot;arena1&amp;quot;) == false and castingSpell == GetSpellInfo(v) and endTime/1000 - GetTime() &amp;lt; 0.5  then CastSpellByID(96231,&amp;quot;arena1&amp;quot;) end end
local castingSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;arena2&amp;quot;)
for i,v in ipairs(buff) do
if IsSpellInRange(&amp;quot;Rebuke&amp;quot;, &amp;quot;arena2&amp;quot;) and PQR_IsOutOfSight(&amp;quot;arena2&amp;quot;) and castingSpell == GetSpellInfo(v) and endTime/1000 - GetTime() &amp;lt; 0.5  then CastSpellByID(96231,&amp;quot;arena2&amp;quot;) end end
local castingSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;arena3&amp;quot;)
for i,v in ipairs(buff) do
if IsSpellInRange(&amp;quot;Rebuke&amp;quot;, &amp;quot;arena3&amp;quot;) and PQR_IsOutOfSight(&amp;quot;arena3&amp;quot;) and castingSpell == GetSpellInfo(v) and endTime/1000 - GetTime() &amp;lt; 0.5  then CastSpellByID(96231,&amp;quot;arena3&amp;quot;) end end
local castingSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;arena4&amp;quot;)
for i,v in ipairs(buff) do
if IsSpellInRange(&amp;quot;Rebuke&amp;quot;, &amp;quot;arena4&amp;quot;) and PQR_IsOutOfSight(&amp;quot;arena4&amp;quot;) and castingSpell == GetSpellInfo(v) and endTime/1000 - GetTime() &amp;lt; 0.5  then CastSpellByID(96231,&amp;quot;arena4&amp;quot;) end end
local castingSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;arena5&amp;quot;)
for i,v in ipairs(buff) do
if IsSpellInRange(&amp;quot;Rebuke&amp;quot;, &amp;quot;arena5&amp;quot;) and PQR_IsOutOfSight(&amp;quot;arena5&amp;quot;) and castingSpell == GetSpellInfo(v) and endTime/1000 - GetTime() &amp;lt; 0.5  then CastSpellByID(96231,&amp;quot;arena5&amp;quot;) end end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Blessing of Protection</Name><Default>false</Default><SpellID>1022</SpellID><Actions></Actions><Lua>local buff = { 73975, 59879,59921,1943,76577,703,31801,31804,8033,1822,33878,33876,6785,81170,80965,5221,772,1715,86346,1978,82654,53238,43235 }

for i,v in ipairs(buff) do
 if UnitDebuffID(PQR_CustomTarget,v) then havedebuff = 1 end
end
if PQR_CustomTargetHP &amp;lt; 10  and havedebuff == 1 then 
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>InterruptCasttest</Name><Default>false</Default><SpellID>96231</SpellID><Actions>/stopcasting</Actions><Lua>local buff = { 118,116,61305,28271,28272,61780,61721,2637,33786,5185,8936,50464,19750,82326,2061,9484,605,8129,331,8004,51505,403,77472,51514,5782,1120,48181,30108 }

local castingSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;target&amp;quot;)
for i,v in ipairs(buff) do
if IsSpellInRange(&amp;quot;Rebuke&amp;quot;, &amp;quot;target&amp;quot;)   and PQR_IsOutOfSight(&amp;quot;target&amp;quot;) == false and castingSpell == GetSpellInfo(v) and 1-((endTime/1000 - GetTime()/endTime) &amp;gt; 0.5  then return true end end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Hammer of Wrath</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local myMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

if IsSpellInRange(&amp;quot;Hammer of Wrath&amp;quot;, &amp;quot;target&amp;quot;) == 1 and PQR_CustomTargetHP &amp;gt; 50 and myMana &amp;gt; 10 and PQR_IsOutOfSight(&amp;quot;target&amp;quot;) == false
then
	CastSpellByID(24275,&amp;quot;target&amp;quot;)
end
if IsSpellInRange(&amp;quot;Hammer of Wrath&amp;quot;, &amp;quot;focus&amp;quot;) == 1 and PQR_CustomTargetHP &amp;gt; 50 and myMana &amp;gt; 10 and PQR_IsOutOfSight(&amp;quot;focus&amp;quot;) == false
then
	CastSpellByID(24275,&amp;quot;focus&amp;quot;)
end
if IsSpellInRange(&amp;quot;Hammer of Wrath&amp;quot;, &amp;quot;arena1&amp;quot;) == 1 and PQR_CustomTargetHP &amp;gt; 50 and myMana &amp;gt; 10 and PQR_IsOutOfSight(&amp;quot;arena1&amp;quot;) == false
then
	CastSpellByID(24275,&amp;quot;arena1&amp;quot;)
end
if IsSpellInRange(&amp;quot;Hammer of Wrath&amp;quot;, &amp;quot;arena2&amp;quot;) == 1 and PQR_CustomTargetHP &amp;gt; 50 and myMana &amp;gt; 10 and PQR_IsOutOfSight(&amp;quot;arena2&amp;quot;) == false
then
	CastSpellByID(24275,&amp;quot;arena2&amp;quot;)
end
if IsSpellInRange(&amp;quot;Hammer of Wrath&amp;quot;, &amp;quot;arena3&amp;quot;) == 1 and PQR_CustomTargetHP &amp;gt; 50 and myMana &amp;gt; 10 and PQR_IsOutOfSight(&amp;quot;arena3&amp;quot;) == false
then
	CastSpellByID(24275,&amp;quot;arena3&amp;quot;)
end
if IsSpellInRange(&amp;quot;Hammer of Wrath&amp;quot;, &amp;quot;arena4&amp;quot;) == 1 and PQR_CustomTargetHP &amp;gt; 50 and myMana &amp;gt; 10 and PQR_IsOutOfSight(&amp;quot;arena4&amp;quot;) == false
then
	CastSpellByID(24275,&amp;quot;arena4&amp;quot;)
end
if IsSpellInRange(&amp;quot;Hammer of Wrath&amp;quot;, &amp;quot;arena5&amp;quot;) == 1 and PQR_CustomTargetHP &amp;gt; 50 and myMana &amp;gt; 10 and PQR_IsOutOfSight(&amp;quot;arena5&amp;quot;) == false
then
	CastSpellByID(24275,&amp;quot;arena5&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Divine Plea Abort</Name><Default>false</Default><SpellID>0</SpellID><Actions>/cancelaura Divine Plea</Actions><Lua>local myMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

if myMana &amp;gt;30 and PQR_CustomTargetHP &amp;lt; 30 and UnitBuffID(&amp;quot;player&amp;quot;,54428) ~= nil then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Hammer of Justice</Name><Default>false</Default><SpellID>853</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;mouseover&amp;quot;) 
and IsLeftShiftKeyDown() 
and not GetCurrentKeyBoardFocus() 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>--- Specials ---</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if modkeytime == nil then modkeytime = 0 end
if IsRightControlKeyDown() and GetTime() - modkeytime &amp;gt; 1  then
  modkeytime = GetTime()
  if modkeystate then 
    modkeystate = nil 
    print(&amp;quot;Rotation mode: \124cFFDBFA2APVP Mode&amp;quot;)
  else 
    modkeystate = 1 
    print(&amp;quot;Rotation mode: \PVE Mode&amp;quot;)
  end
end


-- Avoid sudden death on Ultraxion
local fadingtime = select(7,UnitDebuffID(&amp;quot;player&amp;quot;,110070))
if fadingtime and fadingtime - GetTime() &amp;lt; 1.3 then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end 

-- Avoid Hour of Twilight on Ultraxion, Delete next 3 lines if you are working as tank
local channelSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;boss1&amp;quot;)
if channelSpell == GetSpellInfo(109417) and eventmodekeystate == 1 and endTime/1000 - GetTime() &amp;lt; 1.3 
then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>BoLPurged</Name><Default>false</Default><SpellID>53563</SpellID><Actions></Actions><Lua>local bol = UnitBuffID(PQR_CustomTarget, 53563)

if PQR_CustomTargetHP &amp;lt; 75 and PQR_CustomTargetHP &amp;gt; 30 and bol == nil then 
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>BoL PVE</Name><Default>false</Default><SpellID>53563</SpellID><Actions></Actions><Lua>local mytarget = nil
local doneVG = nil
local tophp = 0
local allinrange = 1
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()

if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end

for i = 1, members, 1 do
  local member = group..tostring(i)
  local memberhp = UnitHealthMax(member)
  local _,_,_,_,_,_,_,source = UnitBuffID(member, 53563)
  if source == &amp;quot;player&amp;quot; then doneVG = 1 end
  if UnitInRange(member) == false then allinrange = nil end
  if memberhp &amp;gt; tophp and UnitInRange(member) and UnitIsUnit(&amp;quot;player&amp;quot;,member) == nil and source == nil and UnitGroupRolesAssigned(&amp;quot;target&amp;quot;) ~= &amp;quot;HEALER&amp;quot; then
    mytarget = member
    tophp = memberhp
  end
end


if mytarget and doneVG == nil and allinrange and UnitIsDead(mytarget) == nil and modkeystate == 1 then CastSpellByID(53563, mytarget) end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Divine Favor</Name><Default>false</Default><SpellID>31842</SpellID><Actions></Actions><Lua>if PQR_CustomTarget &amp;lt; 30 then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Hand of Sacrifice</Name><Default>false</Default><SpellID>6940</SpellID><Actions></Actions><Lua>local myHealth = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

if myHealth &amp;gt; 60 and  PQR_CustomTargetHP &amp;lt; 40 then 
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Lay on Hands</Name><Default>false</Default><SpellID>633</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 10 then 
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability></PALADIN>